{
  "name": "ActiveCampaign to MinIO",
  "description": "Pipeline para extrair dados de contatos e campanhas do ActiveCampaign e armazenar no MinIO",
  "source": {
    "sourceDefinitionId": "b03a9f3e-22a5-11eb-adc1-0242ac120002",
    "sourceName": "ActiveCampaign",
    "connectionConfiguration": {
      "api_key": "${ACTIVECAMPAIGN_API_KEY}",
      "api_url": "${ACTIVECAMPAIGN_API_URL}",
      "start_date": "2023-01-01T00:00:00Z"
    }
  },
  "destination": {
    "destinationDefinitionId": "4816b78f-1489-44c1-9060-4b19d5fa9362",
    "destinationName": "S3",
    "connectionConfiguration": {
      "s3_bucket_name": "lakehouse-bronze",
      "s3_bucket_path": "activecampaign",
      "s3_bucket_region": "us-east-1",
      "access_key_id": "minioadmin",
      "secret_access_key": "minioadmin123",
      "s3_endpoint": "http://minio.minio.svc.cluster.local:9000",
      "s3_path_format": "${NAMESPACE}/${STREAM_NAME}/${YEAR}/${MONTH}/${DAY}/${EPOCH}_${UUID}",
      "file_name_pattern": "${TIMESTAMP}_${PART_NUMBER}",
      "format": {
        "format_type": "Parquet",
        "compression_codec": "GZIP"
      },
      "s3_filename_template": "${TIMESTAMP}_${PART_NUMBER}",
      "glue_catalog_float_as_decimal": false
    }
  },
  "streams": [
    {
      "stream": {
        "name": "contacts",
        "json_schema": {
          "type": "object",
          "properties": {
            "id": {"type": "string"},
            "email": {"type": "string"},
            "firstName": {"type": "string"},
            "lastName": {"type": "string"},
            "phone": {"type": "string"},
            "orgid": {"type": "string"},
            "orgname": {"type": "string"},
            "segmentio_id": {"type": "string"},
            "bounced_hard": {"type": "string"},
            "bounced_soft": {"type": "string"},
            "bounced_date": {"type": "string", "format": "date-time"},
            "ip": {"type": "string"},
            "ua": {"type": "string"},
            "hash": {"type": "string"},
            "socialdata_lastcheck": {"type": "string", "format": "date-time"},
            "email_local": {"type": "string"},
            "email_domain": {"type": "string"},
            "sentcnt": {"type": "string"},
            "rating_tstamp": {"type": "string", "format": "date-time"},
            "gravatar": {"type": "string"},
            "deleted": {"type": "string"},
            "anonymized": {"type": "string"},
            "adate": {"type": "string", "format": "date-time"},
            "udate": {"type": "string", "format": "date-time"},
            "cdate": {"type": "string", "format": "date-time"},
            "edate": {"type": "string", "format": "date-time"},
            "deleted_at": {"type": "string", "format": "date-time"},
            "created_utc_timestamp": {"type": "string", "format": "date-time"},
            "updated_utc_timestamp": {"type": "string", "format": "date-time"},
            "created_timestamp": {"type": "string", "format": "date-time"},
            "updated_timestamp": {"type": "string", "format": "date-time"},
            "created_by": {"type": "string"},
            "updated_by": {"type": "string"},
            "links": {"type": "object"},
            "id_check": {"type": "string"},
            "organization": {"type": "string"},
            "tags": {"type": "string"},
            "fields": {
              "type": "object",
              "properties": {
                "lead_source": {"type": "string"},
                "utm_campaign": {"type": "string"},
                "utm_source": {"type": "string"},
                "utm_medium": {"type": "string"},
                "utm_content": {"type": "string"},
                "utm_term": {"type": "string"},
                "company": {"type": "string"},
                "position": {"type": "string"},
                "website": {"type": "string"},
                "notes": {"type": "string"}
              }
            }
          }
        },
        "supported_sync_modes": ["full_refresh", "incremental"],
        "source_defined_cursor": true,
        "default_cursor_field": ["updated_timestamp"],
        "source_defined_primary_key": [["id"]]
      },
      "config": {
        "sync_mode": "incremental",
        "cursor_field": ["updated_timestamp"],
        "destination_sync_mode": "append",
        "primary_key": [["id"]],
        "selected": true
      }
    },
    {
      "stream": {
        "name": "campaigns",
        "json_schema": {
          "type": "object",
          "properties": {
            "id": {"type": "string"},
            "type": {"type": "string"},
            "userid": {"type": "string"},
            "segmentid": {"type": "string"},
            "bounceid": {"type": "string"},
            "realcid": {"type": "string"},
            "sendid": {"type": "string"},
            "threadid": {"type": "string"},
            "seriesid": {"type": "string"},
            "formid": {"type": "string"},
            "basetemplateid": {"type": "string"},
            "basemessageid": {"type": "string"},
            "addressid": {"type": "string"},
            "source": {"type": "string"},
            "name": {"type": "string"},
            "cdate": {"type": "string", "format": "date-time"},
            "mdate": {"type": "string", "format": "date-time"},
            "sdate": {"type": "string", "format": "date-time"},
            "ldate": {"type": "string", "format": "date-time"},
            "send_amt": {"type": "string"},
            "total_amt": {"type": "string"},
            "opens": {"type": "string"},
            "uniqueopens": {"type": "string"},
            "linkclicks": {"type": "string"},
            "uniquelinkclicks": {"type": "string"},
            "subscriberclicks": {"type": "string"},
            "forwards": {"type": "string"},
            "uniqueforwards": {"type": "string"},
            "hardbounces": {"type": "string"},
            "softbounces": {"type": "string"},
            "unsubscribes": {"type": "string"},
            "unsubreasons": {"type": "string"},
            "updates": {"type": "string"},
            "socialshares": {"type": "string"},
            "replies": {"type": "string"},
            "uniquereplies": {"type": "string"},
            "status": {"type": "string"},
            "public": {"type": "string"},
            "mail_transfer": {"type": "string"},
            "mail_send": {"type": "string"},
            "mail_cleanup": {"type": "string"},
            "mailer_log_file": {"type": "string"},
            "tracklinks": {"type": "string"},
            "tracklinksanalytics": {"type": "string"},
            "trackreads": {"type": "string"},
            "trackreadsanalytics": {"type": "string"},
            "analytics_campaign_name": {"type": "string"},
            "tweet": {"type": "string"},
            "facebook": {"type": "string"},
            "survey": {"type": "string"},
            "embed_images": {"type": "string"},
            "htmlunsub": {"type": "string"},
            "textunsub": {"type": "string"},
            "htmlunsubdata": {"type": "string"},
            "textunsubdata": {"type": "string"},
            "recurring": {"type": "string"},
            "willrecur": {"type": "string"},
            "split_type": {"type": "string"},
            "split_content": {"type": "string"},
            "split_offset": {"type": "string"},
            "split_offset_type": {"type": "string"},
            "split_winner_messageid": {"type": "string"},
            "split_winner_awaiting": {"type": "string"},
            "responder_offset": {"type": "string"},
            "responder_type": {"type": "string"},
            "responder_existing": {"type": "string"},
            "reminder_field": {"type": "string"},
            "reminder_format": {"type": "string"},
            "reminder_type": {"type": "string"},
            "reminder_offset": {"type": "string"},
            "reminder_offset_type": {"type": "string"},
            "reminder_offset_sign": {"type": "string"},
            "reminder_last_cron_run": {"type": "string", "format": "date-time"},
            "activerss_interval": {"type": "string"},
            "activerss_url": {"type": "string"},
            "activerss_items": {"type": "string"},
            "ip4": {"type": "string"},
            "laststep": {"type": "string"},
            "managetext": {"type": "string"},
            "schedule": {"type": "string"},
            "scheduleddate": {"type": "string", "format": "date-time"},
            "waitpreview": {"type": "string"},
            "deletestamp": {"type": "string", "format": "date-time"},
            "replysys": {"type": "string"},
            "created_timestamp": {"type": "string", "format": "date-time"},
            "updated_timestamp": {"type": "string", "format": "date-time"},
            "created_by": {"type": "string"},
            "updated_by": {"type": "string"},
            "links": {"type": "object"}
          }
        },
        "supported_sync_modes": ["full_refresh", "incremental"],
        "source_defined_cursor": true,
        "default_cursor_field": ["updated_timestamp"],
        "source_defined_primary_key": [["id"]]
      },
      "config": {
        "sync_mode": "incremental",
        "cursor_field": ["updated_timestamp"],
        "destination_sync_mode": "append",
        "primary_key": [["id"]],
        "selected": true
      }
    },
    {
      "stream": {
        "name": "lists",
        "json_schema": {
          "type": "object",
          "properties": {
            "id": {"type": "string"},
            "name": {"type": "string"},
            "cdate": {"type": "string", "format": "date-time"},
            "p_use_tracking": {"type": "string"},
            "p_use_analytics_read": {"type": "string"},
            "p_use_analytics_link": {"type": "string"},
            "p_use_twitter": {"type": "string"},
            "p_use_facebook": {"type": "string"},
            "p_embed_image": {"type": "string"},
            "p_use_captcha": {"type": "string"},
            "send_last_broadcast": {"type": "string"},
            "private": {"type": "string"},
            "analytics_domains": {"type": "string"},
            "analytics_source": {"type": "string"},
            "analytics_ua": {"type": "string"},
            "twitter_token": {"type": "string"},
            "twitter_token_secret": {"type": "string"},
            "facebook_session": {"type": "string"},
            "carboncopy": {"type": "string"},
            "subscription_notify": {"type": "string"},
            "unsubscription_notify": {"type": "string"},
            "require_name": {"type": "string"},
            "get_unsubscribe_reason": {"type": "string"},
            "to_name": {"type": "string"},
            "optinoptout": {"type": "string"},
            "sender_name": {"type": "string"},
            "sender_addr1": {"type": "string"},
            "sender_addr2": {"type": "string"},
            "sender_city": {"type": "string"},
            "sender_state": {"type": "string"},
            "sender_zip": {"type": "string"},
            "sender_country": {"type": "string"},
            "sender_phone": {"type": "string"},
            "fulladdress": {"type": "string"},
            "optinmessageid": {"type": "string"},
            "optoutconf": {"type": "string"},
            "deletestamp": {"type": "string", "format": "date-time"},
            "udate": {"type": "string", "format": "date-time"},
            "created_timestamp": {"type": "string", "format": "date-time"},
            "updated_timestamp": {"type": "string", "format": "date-time"},
            "created_by": {"type": "string"},
            "updated_by": {"type": "string"},
            "links": {"type": "object"}
          }
        },
        "supported_sync_modes": ["full_refresh", "incremental"],
        "source_defined_cursor": true,
        "default_cursor_field": ["updated_timestamp"],
        "source_defined_primary_key": [["id"]]
      },
      "config": {
        "sync_mode": "incremental",
        "cursor_field": ["updated_timestamp"],
        "destination_sync_mode": "append",
        "primary_key": [["id"]],
        "selected": true
      }
    },
    {
      "stream": {
        "name": "deals",
        "json_schema": {
          "type": "object",
          "properties": {
            "id": {"type": "string"},
            "hash": {"type": "string"},
            "owner": {"type": "string"},
            "contact": {"type": "string"},
            "organization": {"type": "string"},
            "group": {"type": "string"},
            "stage": {"type": "string"},
            "title": {"type": "string"},
            "description": {"type": "string"},
            "percent": {"type": "string"},
            "cdate": {"type": "string", "format": "date-time"},
            "mdate": {"type": "string", "format": "date-time"},
            "nextdate": {"type": "string", "format": "date-time"},
            "nexttaskid": {"type": "string"},
            "value": {"type": "string"},
            "currency": {"type": "string"},
            "winProbability": {"type": "string"},
            "winProbabilityMdate": {"type": "string", "format": "date-time"},
            "status": {"type": "string"},
            "activitycount": {"type": "string"},
            "nextdealid": {"type": "string"},
            "edate": {"type": "string", "format": "date-time"},
            "created_timestamp": {"type": "string", "format": "date-time"},
            "updated_timestamp": {"type": "string", "format": "date-time"},
            "created_by": {"type": "string"},
            "updated_by": {"type": "string"},
            "links": {"type": "object"}
          }
        },
        "supported_sync_modes": ["full_refresh", "incremental"],
        "source_defined_cursor": true,
        "default_cursor_field": ["updated_timestamp"],
        "source_defined_primary_key": [["id"]]
      },
      "config": {
        "sync_mode": "incremental",
        "cursor_field": ["updated_timestamp"],
        "destination_sync_mode": "append",
        "primary_key": [["id"]],
        "selected": true
      }
    }
  ],
  "schedule": {
    "units": 6,
    "timeUnit": "hours"
  },
  "status": "active",
  "resourceRequirements": {
    "cpu_request": "0.25",
    "cpu_limit": "0.5",
    "memory_request": "0.5Gi",
    "memory_limit": "1Gi"
  }
}

